# AGENTS.md

Repository guidance for coding agents and contributors.

## Scope

- Apply these rules to the whole repository.
- Main implementation targets:
  - `expense_cli.py`
  - `scripts/generate_workbooks.py`
  - documentation files in repo root

## Development conventions

- Python 3.11+.
- Keep dependencies minimal.
- Prefer standard library unless a package is necessary.
- Preserve Portuguese business terms used by the user domain (`Assinaturas`, `Parcelados`, `Orçamento`, `Transações`).

## CLI changes

- Any new feature in `expense_cli.py` must include:
  - command wiring in argparse
  - persistent storage updates (SQLite schema/migrations-safe behavior)
  - at least one report/list path to validate outcomes
- Keep commands idempotent where possible (example: monthly subscription materialization).

## Excel/workbook changes

- Robust workbook structure is generated by `scripts/generate_workbooks.py`.
- If workbook schema changes, update:
  - generator script
  - `WORKBOOK_DESIGN.md`
  - `README.md` usage snippets if commands/outputs change

## Validation checklist

- Run:
  - `make test-cli`
- For workbook changes, run:
  - `make gen-workbook`
- For quick end-to-end confidence, run:
  - `make smoke`
- Prefer lightweight smoke tests over heavy frameworks unless requested.

## Non-goals unless requested

- No deployment/infrastructure changes.
- No frontend/UI work.
- No destructive resets or reverting unrelated user changes.
